# 小小 - 定制化代码生成项目

## 项目介绍

这是一个基于 React + Spring Boot + Vert.x 响应式编程的 **定制化代码生成项目** 。

## 技术选型

### 前端

- React 开发框架 + 组件库 + 代码编辑器
- 前端工程化：ESLint + Prettier + TypeScript

### 后端

- Java Spring Boot + MySQL + MyBatis Plus
- Java 命令行应用开发
- FreeMarker 模板引擎
- Vert.x 响应式编程
- Caffeine + Redis 多级缓存
- 分布式任务调度系统
- 多种设计模式
- 多种系统设计的巧思
- 对象存储

### 代码生成器的核心原理

一句话：参数 + 模板文件 = 生成的完整代码

比如参数：

```java
author = 小小
```

模板文件代码：

```java
-----------
author ${作者}
-----------
```

将参数注入到模板文件中，得到生成的完整代码：

```java
-----------
author 小小
-----------
```

如果想要使用这套模板生成其他的代码，只需要改变参数的值即可，而不需要改变模板文件。

------

扩展点TODO

```前端```

在线使用功能：优化模型参数的填写顺序和依赖关系，优先填写单个字段，再根据单个字段的值判断是否要填写模型组。

在线使用功能：根据字段的类型，区分填写值的表单组件，比如布尔类型的字段使用 Radio 单选组件。

在线使用功能：表单项自动填充模型配置中指定的默认值。

在线制作功能：填写文件配置信息是个比较麻烦的操作，能否支持先上传模板文件，然后自动生成文件配置信息？或者支持上传文件夹，自动识别出文件列表？

创建生成器页面：支持传入 meta.json 元信息配置文件来创建生成器。用户如果使用本地模板制作工具得到了现成的元信息文件，就能够在制作完成后直接创建、自动填充表单、再二次修改，不用完全从 0 开始在前端填写。

补充前端的异常处理逻辑，给出更友好的提示。比如后端响应异常时，前端仍然能下载文件。

优化代码生成器的详情页，让文件配置、模型配置的展示更美观，比如隐藏没有值的字段。

前端支持 “模板在线制作” 功能，能够让用户在线 “挖坑”，相当于 maker 项目中的模板制作能力线上化。

```后端```

用户上传生成器时，对文件进行校验，比如是否存在脚本、是否遵守规范等。

多个用户并发调用 “使用生成器接口” 时，是否会出现写入数据文件冲突的情况，如何解决？

优化使用生成器接口的耗时，可以缓存之前已经用过的生成器，不用多次从对象存储下载。

补充缓存更新机制，用户更新生成器后，即时清理缓存，保证拿到的数据是最新的。

给代码生成器增加更多状态，比如制作中、打包中、待发布、审核中、已发布，设置一套完备的状态流转逻辑。并能够监控状态的变化。

补充后端的异常处理逻辑，返回给前端更友好的报错信息。

定时批量删除模板制作文件会不会有什么问题？比如刚上传就删了。

通过反射，实现 Picocli 框架的强制交互式输入。

模板制作工具：增加更多模板处理机制，比如用某个变量控制是否生成某段代码。或者针对特定的文件类型编写对应的处理逻辑（比如替换 xml 文件中的标签），而不仅仅是字符串匹配替换。（文字教程第 7 - 8 节）

模板制作工具：支持根据传入的模型参数替换生成的文件夹目录名称。
